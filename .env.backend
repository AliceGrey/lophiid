# Backend Infrastructure Environment Variables
# This file contains configuration for the central backend server that hosts:
# - Backend gRPC server (for agent connections)
# - API server (for UI access)
# - UI (web interface)
# - PostgreSQL database
# 
# Keep this file secure - contains sensitive backend configuration

# Database Configuration
POSTGRES_PASSWORD=changeme

# API Configuration
API_KEY=lophiid-api-key

# Database Configuration (shared by all services)
LOPHIID_DATABASE_URL=postgres://lophiid:changeme@postgres:5432/lophiid

# Backend Configuration (gRPC server for agent connections)  
LOPHIID_BACKEND_DATABASE_URL=${LOPHIID_DATABASE_URL}
# Listen on all interfaces so remote agents can connect via host IP
LOPHIID_BACKEND_LISTENER_LISTEN_ADDRESS=0.0.0.0:8080
LOPHIID_BACKEND_LISTENER_SSL_CERT=/app/certs/server/server-cert.pem
LOPHIID_BACKEND_LISTENER_SSL_KEY=/app/certs/server/server-key.pem
LOPHIID_BACKEND_LISTENER_SSL_CA_CERT=/app/certs/ca/ca-cert.pem
LOPHIID_BACKEND_LOG_LEVEL=info
LOPHIID_BACKEND_LOG_FILE=/app/logs/backend.log
LOPHIID_BACKEND_DOWNLOADER_MALWARE_DOWNLOAD_DIR=/app/malware

# API Server Configuration
LOPHIID_API_DATABASE_URL=${LOPHIID_DATABASE_URL}
LOPHIID_API_GENERAL_LISTEN_IP=0.0.0.0
LOPHIID_API_GENERAL_LISTEN_PORT=9999
LOPHIID_API_GENERAL_LOG_LEVEL=info
LOPHIID_API_GENERAL_LOG_FILE=/app/logs/api.log

# UI Configuration (update with your backend server IP/domain)
VUE_APP_BACKEND_ADDRESS=http://localhost:9999

# Triage Configuration (uses shared database)
LOPHIID_AI_TRIAGE_ENABLE=false
LOPHIID_AI_TRIAGE_LOG_LEVEL=info
LOPHIID_AI_TRIAGE_LOG_FILE=/app/logs/triage.log

# External Services
LOPHIID_VIRUSTOTAL_API_KEY=REPLACE_WITH_VT_API_KEY

# SSL Certificate Management
LOPHIID_CERT_DOMAIN=REPLACE_WITH_YOUR_DOMAIN
LOPHIID_CERT_EMAIL=REPLACE_WITH_YOUR_EMAIL
CLOUDFLARE_API_TOKEN=REPLACE_WITH_CLOUDFLARE_TOKEN
